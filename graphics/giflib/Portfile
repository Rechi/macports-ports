# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem                      1.0

name                            giflib
version                         5.1.4
set major                       [lindex [split ${version} .] 0]
categories                      graphics
maintainers                     {ryandesign @ryandesign} openmaintainer
license                         MIT
platforms                       darwin
homepage                        https://sourceforge.net/projects/giflib/
master_sites                    sourceforge:project/giflib

description                     GIF library using patented LZW algorithm

long_description                GIF loading and saving shared library. \
                                Uses the LZW algorithm.

checksums                       rmd160  0be94325e1fce48afed83f743a80083073690c30 \
                                sha256  34a7377ba834397db019e8eb122e551a49c98f49df75ec3fcc92b9a794a4f6d1

use_parallel_build              yes

set docdir ${prefix}/share/doc/${name}
post-destroot {
    xinstall -d ${destroot}${docdir}
    xinstall -W ${worksrcpath} AUTHORS BUGS COPYING NEWS README TODO history.asc ${destroot}${docdir}
    xinstall -m 644 {*}[glob ${worksrcpath}/doc/*.1] ${destroot}${prefix}/share/man/man1
}

variant doc description {Install HTML documentation} {
    depends_build-append        port:xmlto
    post-destroot {
        xinstall -d ${destroot}${docdir}/html
        xinstall -m 644 {*}[glob ${worksrcpath}/doc/*.html] ${destroot}${docdir}/html
    }
}

if {![variant_isset doc]} {
    patchfiles-append           patch-no-docs.diff
}

livecheck.regex                 /${name}-(${major}\\.\[0-9.\]+)${extract.suffix}
